name: "Build Docker image"
description: "Builds a docker image for a single component"

inputs:
  component:
    description: "Component to build e.g. service_carts"
    required: true
  registry_endpoint:
    description: "Image registry repo e.g. ghcr.io/saas"
    required: true

runs:
  using: "composite"
  steps:
  - name: docker-compose build ${{ inputs.component }}
    shell: bash
    run: sudo -E docker-compose build ${{ inputs.component }}
    env:
      TAG: ${{ env.BRANCH }}
      REGISTRY_ENDPOINT: ${{ inputs.registry_endpoint }}